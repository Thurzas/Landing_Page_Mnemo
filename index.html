<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mnemo â€” Agent MÃ©moire Personnel</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- â•â• NAV â•â• -->
<nav>
  <span class="nav-logo">Mnemo</span>
  <ul class="nav-links">
    <li><a href="#philosophy">Philosophie</a></li>
    <li><a href="#pipeline">Pipeline</a></li>
    <li><a href="#ingestion">Ingestion</a></li>
    <li><a href="#stockage">Stockage</a></li>
    <li><a href="#tests">Tests</a></li>
    <li><a href="#roadmap">Roadmap</a></li>
  </ul>
  <span class="nav-badge">v3 Â· Phase 2</span>
</nav>

<!-- â•â• HERO â•â• -->
<div class="hero">
  <div class="hero-orbs">
    <div class="orb orb1"></div>
    <div class="orb orb2"></div>
    <div class="orb orb3"></div>
  </div>

  <p class="hero-eyebrow">Agent mÃ©moire personnel Â· CrewAI + SQLite + Ollama</p>

  <h1 class="hero-title">
    <span class="line1">Un agent qui</span>
    <span class="line2">se souvient.</span>
  </h1>

  <p class="hero-sub">
    MÃ©moire hybride long terme, ingestion de documents, retrieval vectoriel et keyword â€” tout tourne localement, hors cloud, sans compromis sur la vie privÃ©e.
  </p>

  <div class="hero-ctas">
    <a href="#pipeline" class="btn btn-primary">
      <span>Voir l'architecture</span>
      <span>â†“</span>
    </a>
    <a href="#tests" class="btn btn-ghost">220 tests Â· 0 fails</a>
  </div>

  <div class="hero-stats">
    <div class="hstat"><span class="hstat-num">220</span><span class="hstat-label">Tests âœ…</span></div>
    <div class="hstat"><span class="hstat-num">8</span><span class="hstat-label">Tables SQLite</span></div>
    <div class="hstat"><span class="hstat-num">7</span><span class="hstat-label">Formats ingÃ©rÃ©s</span></div>
    <div class="hstat"><span class="hstat-num">5</span><span class="hstat-label">Bugs attrapÃ©s</span></div>
    <div class="hstat"><span class="hstat-num">100%</span><span class="hstat-label">Local Â· offline</span></div>
  </div>
</div>

<div class="divider"></div>

<!-- â•â• PHILOSOPHIE â•â• -->
<section id="philosophy">
  <div class="reveal">
    <span class="section-label">Philosophie</span>
    <h2 class="section-title">ConÃ§u pour durer.<br>Pas pour impressionner.</h2>
    <p class="section-desc">Chaque dÃ©cision d'architecture a Ã©tÃ© prise pour la robustesse Ã  long terme : mÃ©moire Ã©ditable manuellement, zÃ©ro vendor lock-in, tests avant features.</p>
  </div>

  <div class="philosophy-grid reveal">
    <div class="phil-card">
      <div class="phil-icon">ğŸ“„</div>
      <div class="phil-title">memory.md comme source de vÃ©ritÃ©</div>
      <div class="phil-desc">La mÃ©moire personnelle reste un fichier Markdown lisible et Ã©ditable humainement. Versionnable avec git. SQLite est un index â€” pas la source.</div>
    </div>
    <div class="phil-card">
      <div class="phil-icon">ğŸ”’</div>
      <div class="phil-title">100% local, 100% privÃ©</div>
      <div class="phil-desc">Ollama en Docker, SQLite sur disque, aucun appel vers un service externe. Ce qui est dit Ã  Mnemo reste sur la machine.</div>
    </div>
    <div class="phil-card">
      <div class="phil-icon">ğŸ§ª</div>
      <div class="phil-title">Tests avant features</div>
      <div class="phil-desc">Phase de stabilisation dÃ©diÃ©e avant d'ajouter des fonctionnalitÃ©s. 5 vrais bugs de production attrapÃ©s par les tests avant d'atteindre l'utilisateur.</div>
    </div>
    <div class="phil-card">
      <div class="phil-icon">ğŸ§ </div>
      <div class="phil-title">MÃ©moire â‰  base de donnÃ©es</div>
      <div class="phil-desc">La mÃ©moire personnelle et les documents ingÃ©rÃ©s sont sÃ©parÃ©s physiquement mais fusionnÃ©s dans le retrieval â€” pour que l'agent sache d'oÃ¹ vient chaque information.</div>
    </div>
  </div>
</section>

<div class="divider"></div>

<!-- â•â• PIPELINE â•â• -->
<div class="pipeline-section">
<div>
  <section id="pipeline" style="padding:0;">
    <div class="reveal">
      <span class="section-label">Architecture</span>
      <h2 class="section-title">5 agents, un seul but.</h2>
      <p class="section-desc">Deux crews CrewAI orchestrent la conversation et la consolidation mÃ©moire. Chaque agent a un rÃ´le unique et un modÃ¨le adaptÃ© Ã  sa tÃ¢che.</p>
    </div>

    <div class="pipeline-flow reveal">
      <div class="pf-step">
        <div class="pf-num">01</div>
        <div class="pf-title">Ã‰valuateur</div>
        <div class="pf-desc">Analyse le message brut. Produit un JSON structurÃ© qui oriente tout le pipeline.</div>
        <div class="pf-tags">
          <span class="pf-tag">intent</span>
          <span class="pf-tag">needs_memory</span>
          <span class="pf-tag">memory_query</span>
        </div>
        <div style="margin-top:12px; font-size:0.58rem; color:var(--muted);">âš™ qwen2.5:3b Â· rapide</div>
      </div>
      <div class="pf-step">
        <div class="pf-num">02</div>
        <div class="pf-title">Memory Retriever</div>
        <div class="pf-desc">Construit le contexte via <code>retrieve_all()</code> â€” mÃ©moire personnelle ET documents ingÃ©rÃ©s fusionnÃ©s par RRF.</div>
        <div class="pf-tags">
          <span class="pf-tag">ğŸ§  mÃ©moire</span>
          <span class="pf-tag">ğŸ“„ documents</span>
        </div>
        <div style="margin-top:12px; font-size:0.58rem; color:var(--muted);">âš™ qwen2.5:7b Â· function calling</div>
      </div>
      <div class="pf-step">
        <div class="pf-num">03</div>
        <div class="pf-title">Agent Principal</div>
        <div class="pf-desc">Seul agent qui parle Ã  l'utilisateur. ReÃ§oit message + contexte enrichi. Meilleur modÃ¨le ici.</div>
        <div class="pf-tags">
          <span class="pf-tag">rÃ©ponse finale</span>
        </div>
        <div style="margin-top:12px; font-size:0.58rem; color:var(--muted);">âš™ qwen2.5:14b Â· qualitÃ© max</div>
      </div>
      <div class="pf-step">
        <div class="pf-num">04</div>
        <div class="pf-title">Consolidateur</div>
        <div class="pf-desc">En fin de session, extrait les faits mÃ©ritant une persistance long terme. Ignore le trivial.</div>
        <div class="pf-tags">
          <span class="pf-tag">facts[]</span>
          <span class="pf-tag">worth_persisting</span>
        </div>
        <div style="margin-top:12px; font-size:0.58rem; color:var(--muted);">âš™ qwen2.5:7b Â· raisonnement</div>
      </div>
      <div class="pf-step">
        <div class="pf-num">05</div>
        <div class="pf-title">Memory Writer</div>
        <div class="pf-desc">Ã‰crit dans memory.md sans dupliquer, dÃ©clenche la re-sync SQLite. Sanitize l'Unicode avant Ã©criture.</div>
        <div class="pf-tags">
          <span class="pf-tag">update_markdown</span>
          <span class="pf-tag">sync_db</span>
        </div>
        <div style="margin-top:12px; font-size:0.58rem; color:var(--muted);">âš™ qwen2.5:7b Â· function calling</div>
      </div>
    </div>
  </section>
</div>
</div>

<div class="divider"></div>

<!-- â•â• INGESTION â•â• -->
<section id="ingestion">
  <div class="reveal">
    <span class="section-label">Phase 2 â€” Perception</span>
    <h2 class="section-title">IngÃ©rer n'importe quel document.</h2>
    <p class="section-desc">Un seul dispatcher <code>ingest_file(path)</code> â€” dÃ©tection automatique du format, dÃ©duplication par hash MD5, pipeline commun.</p>
  </div>

  <div class="ingest-grid reveal">
    <div class="ing-card pdf">
      <div class="ing-icon">ğŸ“„</div>
      <div class="ing-title">PDF</div>
      <div class="ing-desc">Extraction page par page via pypdf. Nettoyage des cÃ©sures et espaces. Barre de progression.</div>
      <div class="ing-tags"><span class="ing-tag">pypdf</span><span class="ing-tag">clean_text()</span><span class="ing-tag">sliding window</span></div>
    </div>
    <div class="ing-card docx">
      <div class="ing-icon">ğŸ“</div>
      <div class="ing-title">DOCX</div>
      <div class="ing-desc">Paragraphes, headings prÃ©fixÃ©s <code>#</code> et tableaux <code>col | col</code> via python-docx.</div>
      <div class="ing-tags"><span class="ing-tag">python-docx</span><span class="ing-tag">heading levels</span><span class="ing-tag">tables</span></div>
    </div>
    <div class="ing-card txt">
      <div class="ing-icon">ğŸ“ƒ</div>
      <div class="ing-title">TXT &amp; Markdown</div>
      <div class="ing-desc">Lecture directe UTF-8. Pages fictives de ~500 mots. ZÃ©ro dÃ©pendance externe.</div>
      <div class="ing-tags"><span class="ing-tag">UTF-8</span><span class="ing-tag">500 mots/page</span></div>
    </div>
    <div class="ing-card code">
      <div class="ing-icon">ğŸ’»</div>
      <div class="ing-title">Code source</div>
      <div class="ing-desc">Python â†’ AST prÃ©cis (fonctions + classes). JS, TS, C, Java, shell â†’ regex patterns. Header langage dans chaque chunk.</div>
      <div class="ing-tags"><span class="ing-tag">.py .js .ts</span><span class="ing-tag">.c .cpp .cs .java</span><span class="ing-tag">.sh .ps1</span></div>
    </div>
    <div class="ing-card retrieval">
      <div class="ing-icon">ğŸ”</div>
      <div class="ing-title">retrieve_all() â€” fusion globale</div>
      <div class="ing-desc">MÃ©moire personnelle + documents ingÃ©rÃ©s fusionnÃ©s par Reciprocal Rank Fusion. Le prompt distingue la source : <code>ğŸ§ </code> mÃ©moire personnelle Â· <code>ğŸ“„ fichier.pdf â€” p.42</code> document.</div>
      <div class="flow-banner">
        <span class="fb-step" style="color:var(--a1);">ğŸ§  FTS5 + cosine mÃ©moire</span>
        <span class="fb-sep">+</span>
        <span class="fb-step" style="color:var(--a6);">ğŸ“„ FTS5 + cosine docs</span>
        <span class="fb-sep">â†’</span>
        <span class="fb-step">RRF Ã— importance Ã— freshness</span>
        <span class="fb-sep">â†’</span>
        <span class="fb-step">top K chunks</span>
      </div>
    </div>
    <div class="ing-card dedup">
      <div class="ing-icon">ğŸ”</div>
      <div class="ing-title">DÃ©duplication MD5</div>
      <div class="ing-desc">Hash MD5 du fichier entier. Double ingestion dÃ©tectÃ©e instantanÃ©ment. Chunk ID = hash(doc_id + page + index + contenu) â€” Ã©limine les collisions.</div>
      <div class="ing-tags"><span class="ing-tag">file_hash()</span><span class="ing-tag">is_already_ingested()</span></div>
    </div>
  </div>
</section>

<div class="divider"></div>

<!-- â•â• STOCKAGE â•â• -->
<section id="stockage">
  <div class="reveal">
    <span class="section-label">Stockage</span>
    <h2 class="section-title">Deux mÃ©moires,<br>un seul retrieval.</h2>
    <p class="section-desc">La mÃ©moire personnelle et les documents sont sÃ©parÃ©s physiquement mais fusionnÃ©s Ã  la recherche â€” pour que l'agent sache toujours d'oÃ¹ vient l'information.</p>
  </div>

  <div class="storage-two reveal" style="margin-top:50px;">
    <div class="stor-card" style="border-color:rgba(247,183,49,0.3);">
      <div class="stor-title" style="color:var(--a3);">ğŸ“„ memory.md</div>
      <div class="stor-desc">Source de vÃ©ritÃ© humaine-lisible. MÃ©moire personnelle uniquement â€” identitÃ©, prÃ©fÃ©rences, projets, historique. Ã‰ditable Ã  la main.</div>
      <div class="stor-tags">
        <span class="stor-tag">ğŸ§‘ IdentitÃ© Utilisateur</span>
        <span class="stor-tag">ğŸ¤– IdentitÃ© Agent</span>
        <span class="stor-tag">ğŸ“š Connaissances</span>
        <span class="stor-tag">ğŸ” Historique sessions</span>
        <span class="stor-tag">âš ï¸ Ã€ ne jamais oublier</span>
      </div>
    </div>
    <div class="stor-card" style="border-color:rgba(124,106,247,0.3);">
      <div class="stor-title" style="color:var(--a1);">ğŸ—„ï¸ SQLite â€” 8 tables</div>
      <div class="stor-desc">Index double FTS5 + vectoriel (768d float32). Les 4 tables Phase 2 (violet) sont sÃ©parÃ©es mais participent au mÃªme retrieval.</div>
      <div class="stor-tags">
        <span class="stor-tag h1">chunks</span>
        <span class="stor-tag h1">embeddings</span>
        <span class="stor-tag h1">chunks_fts</span>
        <span class="stor-tag h1">sessions</span>
        <span class="stor-tag h1">session_facts</span>
        <span class="stor-tag h1">file_state</span>
        <span class="stor-tag h6">documents</span>
        <span class="stor-tag h6">doc_chunks</span>
        <span class="stor-tag h6">doc_embeddings</span>
        <span class="stor-tag h6">doc_chunks_fts</span>
      </div>
    </div>
  </div>

  <div class="rrf-banner reveal">
    <div class="rrf-title">retrieve_all(query, top_k_final=5)</div>
    <div class="rrf-flow">
      <span class="rrf-step">FTS5 keyword</span>
      <span class="rrf-sep">+</span>
      <span class="rrf-step">cosine similarity</span>
      <span class="rrf-sep">â†’</span>
      <span class="rrf-step">adaptive weights</span>
      <span class="rrf-sep">â†’</span>
      <span class="rrf-step">RRF Ã— importance Ã— freshness</span>
      <span class="rrf-sep">â†’</span>
      <span class="rrf-step">merge memory + docs</span>
      <span class="rrf-sep">â†’</span>
      <span class="rrf-step">top K chunks</span>
    </div>
  </div>
</section>

<div class="divider"></div>

<!-- â•â• BUGS â•â• -->
<div class="bugs-section">
<div>
  <section style="padding:0;">
    <div class="reveal">
      <span class="section-label">QualitÃ©</span>
      <h2 class="section-title">Les tests ont trouvÃ©<br>5 vrais bugs.</h2>
      <p class="section-desc">Pas des bugs hypothÃ©tiques â€” des comportements incorrects qui auraient atteint la production sans la phase de stabilisation.</p>
    </div>

    <div class="bugs-grid reveal">
      <div class="bug-card">
        <span class="bug-badge">BUG #1</span>
        <div class="bug-title">Perte silencieuse de chunks</div>
        <div class="bug-cause">Le dernier <code>###</code> de chaque <code>##</code> dans memory.md Ã©tait perdu lors du parsing. Des sous-sections entiÃ¨res n'Ã©taient jamais indexÃ©es en SQLite.</div>
        <div class="bug-fix">Sauvegarde du chunk courant avant reset Ã  chaque changement de section</div>
      </div>
      <div class="bug-card">
        <span class="bug-badge">BUG #2</span>
        <div class="bug-title">Crash sur query vide</div>
        <div class="bug-cause">SQLite FTS5 lÃ¨ve <code>OperationalError</code> sur une string vide. Si l'Ã©valuateur produisait une <code>memory_query</code> vide, tout le pipeline plantait.</div>
        <div class="bug-fix">Guard <code>if not query or not query.strip(): return []</code> en tÃªte de search_keyword()</div>
      </div>
      <div class="bug-card">
        <span class="bug-badge">BUG #3</span>
        <div class="bug-title">Collision de chunk_id</div>
        <div class="bug-cause">Hash MD5 sur le contenu seul : deux passages identiques dans un document (headers rÃ©pÃ©tÃ©s, formules) produisaient le mÃªme ID â€” le second Ã©tait silencieusement skippÃ©.</div>
        <div class="bug-fix">Hash sur <code>doc_id:page:chunk_index:contenu</code> â€” chaque position est garantie unique</div>
      </div>
      <div class="bug-card">
        <span class="bug-badge">BUG #4</span>
        <div class="bug-title">AttributeError sur para.style</div>
        <div class="bug-cause">Les paragraphes crÃ©Ã©s par copier-coller ou outils tiers dans Word peuvent avoir <code>style=None</code>. Crash immÃ©diat Ã  l'ingestion de tout DOCX rÃ©el.</div>
        <div class="bug-fix">Guard triple <code>para.style and para.style.name and para.style.name.startswith(...)</code></div>
      </div>
      <div class="bug-card">
        <span class="bug-badge">BUG #5</span>
        <div class="bug-title">Fonctions courtes disparaissent</div>
        <div class="bug-cause">Le seuil MIN_CHUNK_LEN=80 chars filtrait des fonctions valides comme <code>fetchData</code> ou <code>autre_fonction</code>. Des pans entiers du code n'Ã©taient pas indexÃ©s.</div>
        <div class="bug-fix">Seuil MIN_CHUNK_LEN dÃ©sactivÃ© pour le code â€” la structure sÃ©mantique prime sur la longueur</div>
      </div>
      <div class="bug-card">
        <span class="bug-badge">BUG #6</span>
        <div class="bug-title">Doublons AST walk()</div>
        <div class="bug-cause"><code>ast.walk()</code> descend rÃ©cursivement dans tous les noeuds â€” les mÃ©thodes de classes Ã©taient indexÃ©es deux fois, causant du bruit dans le retrieval code.</div>
        <div class="bug-fix">RemplacÃ© par <code>ast.iter_child_nodes()</code> â€” niveau module uniquement</div>
      </div>
    </div>
  </section>
</div>
</div>

<div class="divider"></div>

<!-- â•â• TESTS â•â• -->
<section id="tests">
  <div class="reveal">
    <span class="section-label">Tests</span>
    <h2 class="section-title">220 tests.<br>ZÃ©ro appel Ollama requis.</h2>
    <p class="section-desc">Chaque fichier est testable sans infrastructure externe grÃ¢ce aux mocks. Le marqueur <code>@pytest.mark.ollama</code> isole les tests nÃ©cessitant le vrai modÃ¨le.</p>
  </div>

  <div class="tests-grid reveal">
    <div class="test-card">
      <div class="test-num">66</div>
      <div class="test-file">test_memory_tools.py</div>
      <div class="test-desc">Briques bas niveau : sanitize, hash, parsing Markdown, sessions, freshness, importance</div>
    </div>
    <div class="test-card">
      <div class="test-num">40</div>
      <div class="test-file">test_retrieval.py</div>
      <div class="test-desc">Retrieval hybride : RRF, cosine, FTS5, adaptive weights (30 offline + 10 @ollama)</div>
    </div>
    <div class="test-card">
      <div class="test-num">25</div>
      <div class="test-file">test_session_cycle.py</div>
      <div class="test-desc">Cycle complet : crews mockÃ©s, sessions orphelines, scÃ©narios bout en bout</div>
    </div>
    <div class="test-card" style="border-color:rgba(249,122,249,0.3);">
      <div class="test-num" style="color:var(--a6);">89</div>
      <div class="test-file" style="color:var(--a6);">test_ingest_tools.py âœ¦</div>
      <div class="test-desc">Pipeline ingestion : chunking, hash, DB, PDF/DOCX/TXT/code source, dispatcher</div>
    </div>
  </div>

  <div class="test-total reveal">
    <div>
      <div class="tt-label">Total</div>
      <div class="tt-num">220 tests âœ…</div>
    </div>
    <div class="tt-bar-wrap"><div class="tt-bar" style="width:100%"></div></div>
    <div style="font-size:0.65rem; color:var(--muted);">0 fails Â· 0 flaky Â· pytest 9.0</div>
  </div>
</section>

<div class="divider"></div>

<!-- â•â• ROADMAP â•â• -->
<section id="roadmap">
  <div class="reveal">
    <span class="section-label">Roadmap</span>
    <h2 class="section-title">OÃ¹ on en est.</h2>
  </div>

  <div class="roadmap-track reveal">
    <div class="rm-phase rm-done">
      <div class="rm-phase-num">0</div>
      <span class="rm-status">âœ“ ComplÃ¨te</span>
      <div class="rm-title">Fondations</div>
      <ul class="rm-items">
        <li class="done">MÃ©moire hybride FTS5 + vectoriel</li>
        <li class="done">RRF Â· importance Â· freshness</li>
        <li class="done">CTRL+C â†’ finally â†’ consolidation</li>
        <li class="done">Unicode sanitize</li>
        <li class="done">Ollama Docker Â· num_ctx 8192</li>
      </ul>
    </div>
    <div class="rm-phase rm-done">
      <div class="rm-phase-num">1</div>
      <span class="rm-status">âœ“ ComplÃ¨te</span>
      <div class="rm-title">Stabilisation</div>
      <ul class="rm-items">
        <li class="done">131 tests (niveaux 1, 2, 3)</li>
        <li class="done">3 bugs corrigÃ©s</li>
        <li class="done">Architecture validÃ©e</li>
        <li class="done">Tests avant features</li>
      </ul>
    </div>
    <div class="rm-phase rm-active">
      <div class="rm-phase-num">2</div>
      <span class="rm-status">â— En cours</span>
      <div class="rm-title">Perception</div>
      <ul class="rm-items">
        <li class="done">Ingestion PDF / DOCX / TXT / MD</li>
        <li class="done">Ingestion code source (11 ext.)</li>
        <li class="done">retrieve_all() Â· 89 tests</li>
        <li class="wip">Conscience temporelle</li>
        <li class="wip">Web occasionnel (SearXNG)</li>
      </ul>
    </div>
    <div class="rm-phase rm-next">
      <div class="rm-phase-num">3</div>
      <span class="rm-status">â¬œ PlanifiÃ©e</span>
      <div class="rm-title">Action</div>
      <ul class="rm-items">
        <li>Dashboard web local</li>
        <li>Router pattern</li>
        <li>Outils shell</li>
        <li>Scheduler</li>
      </ul>
    </div>
    <div class="rm-phase rm-next">
      <div class="rm-phase-num">4</div>
      <span class="rm-status">â¬œ PlanifiÃ©e</span>
      <div class="rm-title">API et Interfaces externes</div>
      <ul class="rm-items">
        <li>REST API (FastAPI)</li>
        <li>Local TTS / STT</li>
        <li>Raspberry PI embedding</li>
        <li>Unity Integration</li>
      </ul>
    </div>
    <div class="rm-phase rm-next">
      <div class="rm-phase-num">5</div>
      <span class="rm-status">â¬œ PlanifiÃ©e</span>
      <div class="rm-title">ProactivitÃ©</div>
      <ul class="rm-items">
        <li>suggestions contextualisÃ©s basÃ© sur la date et la mÃ©moire</li>
        <li>dÃ©tection de routines (patterns)</li>
        <li>Plannications et alertes de deadlines</li>
        <li>Compression de memory.md si jamais il deviens trop large</li>
        <li>Multi-profiles pour diffÃ©rents contextes (travail / loisirs)</li>
      </ul>
    </div>
  </div>
</section>

<div class="divider"></div>

<!-- â•â• FOOTER â•â• -->
<footer>
  <div class="footer-logo">Mnemo</div>
  <div class="footer-sub">Agent mÃ©moire personnel Â· 100% local Â· 100% privÃ©</div>
  <div class="footer-stack">
    <span class="fs-tag">CrewAI â‰¥ 0.130</span>
    <span class="fs-tag">Ollama â‰¥ 0.4</span>
    <span class="fs-tag">SQLite Â· FTS5</span>
    <span class="fs-tag">nomic-embed-text Â· 768d</span>
    <span class="fs-tag">pypdf</span>
    <span class="fs-tag">python-docx</span>
    <span class="fs-tag">numpy â‰¥ 1.26</span>
    <span class="fs-tag">pytest 9.0</span>
    <span class="fs-tag">Python 3.12</span>
  </div>
</footer>

<script>
// Scroll reveal
const observer = new IntersectionObserver(entries => {
  entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); } });
}, { threshold: 0.12 });
document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
</script>
</body>
</html>
